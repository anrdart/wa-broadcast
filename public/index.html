<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>WhatsApp Broadcast Tool</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fab fa-whatsapp"></i> WhatsApp Broadcast Tool</h1>
            <p>Kirim pesan broadcast ke semua kontak WhatsApp Anda</p>
        </header>

        <div class="main-content">
            <!-- Status Connection -->
            <div class="status-card">
                <h3><i class="fas fa-wifi"></i> Status Koneksi</h3>
                <div id="connection-status" class="status-disconnected">
                    <span class="status-indicator"></span>
                    <span id="status-text">Tidak Terhubung</span>
                </div>
                <button id="connect-btn" class="btn btn-primary">
                    <i class="fas fa-play"></i> Mulai Koneksi
                </button>
                <button id="logout-btn" class="btn btn-danger" style="display: none;">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>

            <!-- QR Code Section -->
            <div id="qr-section" class="qr-card" style="display: none;">
                <h3><i class="fas fa-qrcode"></i> Scan QR Code</h3>
                <div id="qr-container">
                    <div id="qr-placeholder">
                        <i class="fas fa-qrcode"></i>
                        <p>QR Code akan muncul di sini</p>
                    </div>
                </div>
                <p class="qr-instruction">Buka WhatsApp di ponsel Anda dan scan QR code di atas</p>
            </div>

            <!-- Contact List -->
            <div class="contacts-card">
                <h3><i class="fas fa-address-book"></i> Daftar Kontak</h3>
                <div class="contacts-header">
                    <div class="contact-count">
                        <span id="total-contacts">0</span> kontak ditemukan
                    </div>
                    <button id="refresh-contacts" class="btn btn-secondary">
                        <i class="fas fa-sync-alt"></i> Refresh
                    </button>
                    <button id="import-csv" class="btn btn-secondary">
                        <i class="fas fa-upload"></i> Import CSV
                    </button>
                </div>
                <div class="contacts-filter">
                    <input type="text" id="search-contacts" placeholder="Cari kontak...">
                    <div class="filter-options">
                        <label>
                            <input type="checkbox" id="select-all-contacts">
                            Pilih Semua
                        </label>
                        <label>
                            <input type="checkbox" id="filter-saved" checked>
                            Kontak Tersimpan
                        </label>
                        <label>
                            <input type="checkbox" id="filter-unsaved" checked>
                            Nomor Tidak Tersimpan
                        </label>
                    </div>
                </div>
                <div id="contacts-list" class="contacts-list">
                    <div class="no-contacts">
                        <i class="fas fa-users"></i>
                        <p>Belum ada kontak. Pastikan WhatsApp sudah terhubung.</p>
                    </div>
                </div>
            </div>

            <!-- Message Composer -->
            <div class="message-card">
                <h3><i class="fas fa-paper-plane"></i> Pesan Broadcast</h3>
                <div class="message-form">
                    <textarea id="message-text" placeholder="Tulis pesan Anda di sini..." rows="5"></textarea>
                    <div class="message-options">
                        <label>
                            <input type="checkbox" id="include-media">
                            Sertakan Media
                        </label>
                        <input type="file" id="media-file" accept="image/*,video/*,audio/*" style="display: none;">
                        <button id="select-media" class="btn btn-secondary" style="display: none;">
                            <i class="fas fa-paperclip"></i> Pilih File
                        </button>
                    </div>
                    <div class="selected-contacts">
                        <span id="selected-count">0</span> kontak dipilih
                    </div>
                    <button id="send-broadcast" class="btn btn-success" disabled>
                        <i class="fas fa-broadcast-tower"></i> Kirim Broadcast
                    </button>
                </div>
            </div>

            <!-- Progress Section -->
            <div id="progress-section" class="progress-card" style="display: none;">
                <h3><i class="fas fa-chart-line"></i> Progress Pengiriman</h3>
                <div class="progress-bar">
                    <div id="progress-fill" class="progress-fill"></div>
                </div>
                <div class="progress-stats">
                    <span id="progress-text">0 / 0</span>
                    <span id="progress-percentage">0%</span>
                </div>
                <div id="progress-log" class="progress-log"></div>
            </div>
        </div>
    </div>

    <script src="qrcode.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/papaparse/5.3.0/papaparse.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
<div id="confirm-modal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center">
    <div class="relative p-5 border w-96 shadow-lg rounded-md bg-white">
        <div class="mt-3 text-center">
            <h3 class="text-lg leading-6 font-medium text-gray-900">Konfirmasi Pengiriman</h3>
            <div class="mt-2 px-7 py-3">
                <p id="confirm-message" class="text-sm text-gray-500"></p>
            </div>
            <div class="items-center px-4 py-3">
                <button id="confirm-ok" class="px-4 py-2 bg-blue-500 text-white text-base font-medium rounded-md w-20 mr-2 hover:bg-blue-600">
                    OK
                </button>
                <button id="confirm-cancel" class="px-4 py-2 bg-gray-500 text-white text-base font-medium rounded-md w-20 hover:bg-gray-600">
                    Cancel
                </button>
            </div>
        </div>
    </div>
</body>
</html>